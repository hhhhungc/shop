(function(){"use strict";var t={5831:function(t,e,r){var a=r(8307),s=r.n(a),i=r(8935),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],n={name:"App"},c=n,u=r(1001),d=(0,u.Z)(c,l,o,!1,null,null,null),p=d.exports,m=r(2747),f=r.n(m),g=r(7349),h=r.n(g),_=r(5165),b=r.n(_),v=r(8985),y=r.n(v),x=r(3280),w=r.n(x),C=r(3329),$=r.n(C),k=r(3388),P=r.n(k),O=r(9221),S=r.n(O),M=r(5571),T=r.n(M),j=r(1031),q=r.n(j),D=r(672),R=r.n(D),U=r(2244),z=r.n(U),A=r(4863),E=r.n(A),V=r(7227),N=r.n(V),Z=r(5263),I=r.n(Z),B=r(2711),H=r.n(B),G=r(1248),F=r.n(G),L=r(1704),Y=r.n(L),W=r(2245),J=r.n(W),X=r(8114),K=r.n(X),Q=r(9014),tt=r.n(Q),et=r(736),rt=r.n(et),at=r(4462),st=r.n(at),it=r(5423),lt=r.n(it),ot=r(2319),nt=r.n(ot),ct=r(8782),ut=r.n(ct),dt=r(8807),pt=r.n(dt),mt=r(3711),ft=r.n(mt),gt=r(9595),ht=r.n(gt),_t=r(5040),bt=r.n(_t),vt=r(5035),yt=r.n(vt),xt=r(7694),wt=r.n(xt),Ct=r(8538),$t=r.n(Ct),kt=r(1192),Pt=r.n(kt);i["default"].use(Pt()),i["default"].use($t()),i["default"].use(wt()),i["default"].use(yt()),i["default"].use(bt()),i["default"].use(ht()),i["default"].use(ft()),i["default"].use(pt()),i["default"].use(ut()),i["default"].use(nt()),i["default"].use(lt()),i["default"].use(st()),i["default"].use(rt()),i["default"].use(tt()),i["default"].use(K()),i["default"].use(J()),i["default"].use(Y()),i["default"].use(F()),i["default"].use(H()),i["default"].use(I()),i["default"].use(N()),i["default"].use(E()),i["default"].use(z()),i["default"].use(R()),i["default"].use(q()),i["default"].use(T()),i["default"].use(S()),i["default"].use(P()),i["default"].use($()),i["default"].use(w()),i["default"].use(y()),i["default"].use(b()),i["default"].prototype.$message=h(),i["default"].prototype.$confirm=f().confirm;var Ot=r(2809),St=r(6166),Mt=r.n(St),Tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-header",[r("ul",{staticClass:"list-unstyled"},[r("li",[r("router-link",{staticClass:"nav_title",attrs:{to:"/"}},[t._v(" BUY SOMETHING ")])],1),r("li",[r("router-link",{attrs:{to:"/products"}},[t._v(" 產品列表 ")])],1),r("li",[r("router-link",{attrs:{to:"/orders"}},[t._v(" 訂單列表 ")])],1)]),r("ul",{staticClass:"list-unstyled"},[r("li",{staticClass:"cart"},[r("span",{staticClass:"cart_num"},[t._v(t._s(t.cart.carts.length))]),r("router-link",{attrs:{to:"/cart"}},[t._v(" 购物车"),r("span",{staticClass:"iconfont icon-cartfill"})])],1),!1===t.login?r("li",[r("router-link",{attrs:{to:"/login"}},[t._v(" 登入"),r("i",{staticClass:"el-icon-user-solid"})])],1):r("li",[r("router-link",{attrs:{to:"/admin"}},[t._v(" 管理员"),r("i",{staticClass:"el-icon-user-solid"})])],1)])]),r("el-main",[r("router-view")],1),r("el-footer",[t._v(" 本网站所有内容及资料全部来自网路，仅供网页开发练习使用，若有侵权请告知。 ")])],1)},jt=[],qt=r(4665),Dt={name:"NavbarComponent",data(){return{}},methods:{...(0,qt.nv)(["checkLogin"]),...(0,qt.nv)("cartModule",["getCart"])},computed:{...(0,qt.rn)(["login"]),...(0,qt.rn)("cartModule",["cart"])},created(){this.checkLogin(),this.getCart()}},Rt=Dt,Ut=(0,u.Z)(Rt,Tt,jt,!1,null,"617746bb",null),zt=Ut.exports,At=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"wrap"},[r("h2",[t._v("最新消息")]),r("div",{staticClass:"wrapper"},t._l(t.news,(function(e){return r("div",{key:e.title,staticClass:"box"},[r("div",{staticClass:"imageBox"},[r("img",{attrs:{src:e.imageUrl}})]),r("div",{staticClass:"content"},[r("h3",[t._v(t._s(e.title))])])])})),0)]),r("h2",[t._v("近期活动")]),r("el-carousel",{attrs:{"indicator-position":"outside"}},t._l(t.campaign,(function(e){return r("el-carousel-item",{key:e.title},[r("h3",[t._v(t._s(e.title))])])})),1),r("h2",[t._v("三大特色")]),r("el-row",{staticStyle:{margin:"40px 0"},attrs:{gutter:20,type:"flex",justify:"center"}},[r("el-col",{attrs:{span:6}},[r("span",{staticClass:"iconfont icon-truck"}),r("h4",[t._v("免运费")]),r("p",[t._v("全站购物满 $3,000 元，境内免收运费。")])]),r("el-col",{attrs:{span:6}},[r("span",{staticClass:"iconfont icon-money_refund_fill"}),r("h4",[t._v("100% 退换货")]),r("p",[t._v("商品全新、无拆封，可享受「7天无理由退换货」服务！")])]),r("el-col",{attrs:{span:6}},[r("span",{staticClass:"iconfont icon-chalkboard-teacher"}),r("h4",[t._v("24 小时客服")]),r("p",[t._v("24 小时客服在线，有问题随时发问，即时回覆。")])])],1)],1)},Et=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("div",{staticClass:"header_bn"},[r("div",{staticClass:"mask"}),r("div",{staticClass:"header_text"},[t._v("BUY"),r("br"),t._v("SOMETHING")])])])}],Vt={name:"HomePage",data(){return{news:[{title:"JUST DO IT",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1615290642882-6b9501729a27?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MjV8fG5pa2V8ZW58MHx8MHx8&auto=format&fit=crop&w=800&q=80"},{title:"Adidas",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1518002171953-a080ee817e1f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"},{title:"Converse",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1622253543934-c3cb280f8323?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"}],campaign:[{title:"Vans",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1531185038189-41815d864f32?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1325&q=80"},{title:"PUMA",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1633523154731-d131470565d7?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NXx8cHVtYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=800&q=80"}]}}},Nt=Vt,Zt=(0,u.Z)(Nt,At,Et,!1,null,"6c532817",null),It=Zt.exports,Bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("ul",{staticClass:"list-unstyled"},[r("li",{staticClass:"title"},[t._v("排序")]),r("li",[r("el-button",{class:{active:"price"===t.sortBy&&!1===t.isReverse},staticStyle:{padding:"20px"},attrs:{type:"text"},on:{click:function(e){t.sortBy="price",t.isReverse=!1}}},[t._v(" 商品价格由高至低 ")])],1),r("li",[r("el-button",{class:{active:"price"===t.sortBy&&!0===t.isReverse},staticStyle:{padding:"20px"},attrs:{type:"text"},on:{click:function(e){t.sortBy="price",t.isReverse=!0}}},[t._v(" 商品价格由低至高 ")])],1)])]),r("el-col",{attrs:{span:18}},[r("el-row",{attrs:{gutter:20}},t._l(t.filterDate,(function(e){return r("el-col",{key:e.id,attrs:{span:12}},[r("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[r("div",{staticClass:"image"},[r("img",{staticClass:"cover-fit",attrs:{src:e.imageUrl,alt:e.title,title:e.title}})]),r("div",{staticClass:"text"},[r("h4",[t._v(t._s(e.title))]),r("p",[t._v("$ "+t._s(e.price))]),r("div",{staticClass:"btn"},[r("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(r){return t.goProductPage(e.id)}}},[t._v("查看商品")]),r("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(r){return t.addToCart(e.id)}}},[t._v("加入购物车")])],1)])])],1)})),1),r("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getProducts}})],1)],1)],1)])},Ht=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("div",{staticClass:"header_mask"},[r("p",[t._v("BUY SOMETHING NOW !!!")])])])}],Gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{"current-page":t.currentPage,layout:"prev, pager, next","page-size":t.pageSize,total:t.pagination.total_pages*t.pageSize},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},Ft=[],Lt={name:"PaginationComponent",props:["pagination"],data(){return{pageSize:10,currentPage:1}},methods:{handleCurrentChange(t){this.$emit("updatePage",t)}}},Yt=Lt,Wt=(0,u.Z)(Yt,Gt,Ft,!1,null,"b05160aa",null),Jt=Wt.exports,Xt={name:"ProductsPage",components:{Pagination:Jt},data(){return{sortBy:"",isReverse:!0}},methods:{getProducts(t=1){this.$store.dispatch("productModule/getProducts",t)},goProductPage(t){this.$router.push(`/product?id=${t}`)},addToCart(t,e=1){this.$store.dispatch("cartModule/addToCart",{id:t,qty:e})}},computed:{...(0,qt.rn)("productModule",["products","pagination"]),filterDate(){const t=this.sortBy,e=JSON.parse(JSON.stringify(this.products)),r=e.sort(((e,r)=>(e=e[t],r=r[t],this.isReverse?e-r:r-e)));return r}},created(){this.getProducts()}},Kt=Xt,Qt=(0,u.Z)(Kt,Bt,Ht,!1,null,"e7fe2e94",null),te=Qt.exports,ee=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"image"},[r("img",{staticClass:"rounded cover-fit",attrs:{src:t.product.imageUrl,alt:t.product.title}})])]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"text"},[r("ul",{staticClass:"list-unstyled"},[r("li",[r("h2",[t._v(t._s(t.product.title))])]),r("li",[r("small",[t._v(t._s(t.product.content))])]),r("li",[r("el-divider")],1),r("li",{staticClass:"cate"},[t._v("分類 : "+t._s(t.product.category))]),r("li",{staticClass:"price"},[t._v(t._s(t._f("currency")(t.product.price)))]),r("li",[r("el-divider")],1)]),r("div",{staticClass:"text_btn"},[r("el-input-number",{attrs:{min:1,max:10,label:"商品数量"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),r("el-button",{attrs:{type:"primary"},on:{click:t.addToCart}},[t._v("加入購物車")])],1)])]),r("el-col",{staticClass:"bottom"},[r("el-tabs",{staticStyle:{"min-height":"300px"},attrs:{type:"border-card",stretch:""}},[r("el-tab-pane",{attrs:{label:"商品描述"}},[t._v(t._s(t.product.description))]),r("el-tab-pane",{attrs:{label:"退换或须知"}},[r("ul",[r("li",[t._v(" 商品到貨享十天猶豫期之權益，辦理退貨商品必須是全新狀態且包裝完整，商品一經拆封，等同商品價值已受損，僅能以福利品出售，若需退換貨，我方須收取價值損失之費用(回復原狀、整新費)，請先確認商品正確、外觀可接受，再行開機/使用，以免影響您的權利，祝您購物順心。 ")]),r("li",[t._v(" 個人衛生用品除商品本身有瑕疵外，未拆封商品仍享有十天猶豫期之退貨權利。但已拆封 (如剪標、下水等情形…)，本公司無法接受退換貨。 ")])])]),r("el-tab-pane",{attrs:{label:"常见问答"}},[r("ol",[r("li",[r("b",[t._v("訂單可以免運費嗎？")]),r("br"),t._v(" 會員的所有訂單都可享受免費的普通達配送服務。普通達配送的訂單通常會在 3-6 天內送達。 ")]),r("li",[r("b",[t._v("訂單如何退貨？")]),r("br"),t._v(" 掃描商品外包裝箱側面 / 黑色外包裝袋上的「官網退換貨」二維碼，或者直接掃碼下圖二維碼，開啟退貨。 ")]),r("li",[r("b",[t._v("訂單如何退貨？")]),r("br"),t._v(" 要獲得訂單的退款，您首先要辦理退貨。收到並處理了您的退貨後，如果退貨成功，我們將立即處理您的退款。在我們處理退款時，您會收到電子郵件通知。 ")]),r("li",[r("b",[t._v("如何找到適合您的尺碼？")]),r("br"),t._v(" 我們的尺碼表可以就您所選擇的男鞋、女鞋、服裝、配件來幫您確定合適的尺碼。點擊產品詳情頁面所顯示的「尺碼表」。 ")])])])],1)],1)],1)],1)},re=[],ae={name:"ProductPage",data(){return{product:{},num:1}},methods:{getProduct(t){this.$http.get(`api/ruby/product/${t}`).then((t=>{if(!t.data.success)return this.$message.error("获取商品资料失败");this.product=t.data.product}))},addToCart(){this.$store.dispatch("cartModule/addToCart",{id:this.product.id,qty:this.num})}},created(){this.getProduct(this.$route.query.id)}},se=ae,ie=(0,u.Z)(se,ee,re,!1,null,"ad691920",null),le=ie.exports,oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-table",{attrs:{data:t.orders,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),r("el-table-column",{attrs:{prop:"create_at",label:"购买时间",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.create_at)))]}}])}),r("el-table-column",{attrs:{prop:"user.name",label:"订购人",align:"center",width:"100px"}}),r("el-table-column",{attrs:{label:"购买商品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("ul",{staticClass:"list-unstyled"},t._l(e.row.products,(function(e,a){return r("li",{key:a},[t._v(" "+t._s(e.product.title)+" 數量："+t._s(e.qty)+" "+t._s(e.product.unit)+" ")])})),0)]}}])}),r("el-table-column",{attrs:{prop:"total",label:"应付金额",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.total))+" ")]}}])}),r("el-table-column",{attrs:{prop:"is_paid",label:"是否付款",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_paid?r("el-tag",{attrs:{size:"small"}},[t._v("已付款")]):r("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("未付款")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.goCheckout(e.row.id)}}},[t._v("查看")])]}}])})],1),r("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getOrders}})],1)},ne=[],ce={name:"OrdersPage",components:{Pagination:Jt},data(){return{orders:[],tempOrder:{},pagination:{}}},methods:{getOrders(t=1){this.$http.get(`api/ruby/orders?page=${t}`).then((t=>{if(!t.data.success)return this.$message.error("获取订单资料失败");this.orders=t.data.orders,this.pagination=t.data.pagination}))},goCheckout(t){this.$router.push(`/checkout?id=${t}`)}},created(){this.getOrders()}},ue=ce,de=(0,u.Z)(ue,oe,ne,!1,null,null,null),pe=de.exports,me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"step"},[r("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"确认订单"}}),r("el-step",{attrs:{title:"付款资讯"}}),r("el-step",{attrs:{title:"确认付款"}}),r("el-step",{attrs:{title:"付款完成"}})],1)],1),r("el-card",[r("div",{staticClass:"content"},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("订单总金额")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t._f("currency")(t.order.total)))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("订单成立时间")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t._f("date")(t.order.create_at)))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人姓名")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.name))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人Email")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.email))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人电话")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.tel))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人地址")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.address))])],1),t.order.message?r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("留言")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.order.message))])],1):t._e(),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("付款狀態")])]),r("el-col",{attrs:{span:16}},[t.order.is_paid?r("el-tag",{attrs:{type:"primary"}},[t._v("付款完成")]):r("el-tag",{attrs:{type:"danger"}},[t._v("尚未付款")])],1)],1)],1),t.order.is_paid?t._e():r("div",{staticClass:"cart_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:t.payOrder}},[t._v("确认付款")])],1)])],1)},fe=[],ge={name:"CheckouutPage",data(){return{active:2,orderId:"",order:{user:{}}}},methods:{getOrder(){this.$http.get(`api/ruby/order/${this.orderId}`).then((t=>{if(!t.data.success)return this.$message.error("获取订单资料失败");this.order=t.data.order,t.data.order.is_paid&&(this.active=4)}))},payOrder(){this.$http.post(`api/ruby/pay/${this.orderId}`).then((t=>{if(!t.data.success)return this.$message.error("订单付款失败");this.getOrder(),this.$message.success("订单付款完成"),this.active=4}))}},created(){this.orderId=this.$route.query.id,this.getOrder()}},he=ge,_e=(0,u.Z)(he,me,fe,!1,null,"237ad53b",null),be=_e.exports,ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"step"},[r("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"确认订单"}}),r("el-step",{attrs:{title:"付款资讯"}}),r("el-step",{attrs:{title:"确认付款"}}),r("el-step",{attrs:{title:"付款完成"}})],1)],1),r("el-card",[0===t.active?r("div",[r("el-table",{attrs:{data:t.cart.carts,stripe:"","empty-text":"购物车内无商品"}},[r("el-table-column",{attrs:{align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(r){return t.removeCartItem(e.row.id)}}})]}}],null,!1,188722867)}),r("el-table-column",{attrs:{label:"产品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"160px",height:"160px"},attrs:{src:t.row.product.imageUrl,alt:t.row.product.title,title:t.row.product.title}})]}}],null,!1,4201574226)}),r("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[r("router-link",{attrs:{to:"/product?id="+e.row.product.id}},[t._v(t._s(e.row.product.title))])]}}],null,!1,2300050751)}),r("el-table-column",{attrs:{prop:"total",label:"单价",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.total)))]}}],null,!1,713166017)}),r("el-table-column",{attrs:{prop:"qty",label:"数量",align:"center",width:"100px"}}),r("el-table-column",{attrs:{prop:"final_total",label:"总价",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.final_total)))]}}],null,!1,2634391666)})],1),r("el-row",{attrs:{type:"flex",justify:"space-between"}},[r("el-col",{attrs:{span:8}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.couponPlaceholder,disabled:t.cart.total!==t.cart.final_total},model:{value:t.coupon,callback:function(e){t.coupon=e},expression:"coupon"}},[r("el-button",{attrs:{slot:"append",disabled:t.cart.total!==t.cart.final_total},on:{click:t.addCoupon},slot:"append"},[t._v(t._s(t.cart.total!==t.cart.final_total?"已使用":"使用"))])],1)],1),r("el-col",{attrs:{span:8}},[r("ul",{staticClass:"list-unstyled"},[r("li",[t._v(" 总金额 "),r("p",[t._v(t._s(t._f("currency")(t.cart.total)))])]),r("li",[t._v(" 折扣金额 "),r("p",[t._v(t._s(t.cart.final_total-t.cart.total))])]),r("li",{staticClass:"border-top"},[t._v(" 最后金额 "),r("p",[t._v(t._s(t._f("currency")(t.cart.final_total)))])])])])],1)],1):t._e(),1===t.active?r("div",[r("el-form",{ref:"userFormRef",attrs:{model:t.form.user,"label-width":"100px",rules:t.userFormRules}},[r("el-form-item",{attrs:{label:"收件人姓名",prop:"name"}},[r("el-input",{model:{value:t.form.user.name,callback:function(e){t.$set(t.form.user,"name",e)},expression:"form.user.name"}})],1),r("el-form-item",{attrs:{label:"收件人电话",prop:"tel"}},[r("el-input",{model:{value:t.form.user.tel,callback:function(e){t.$set(t.form.user,"tel",e)},expression:"form.user.tel"}})],1),r("el-form-item",{attrs:{label:"收件人邮箱",prop:"email"}},[r("el-input",{model:{value:t.form.user.email,callback:function(e){t.$set(t.form.user,"email",e)},expression:"form.user.email"}})],1),r("el-form-item",{attrs:{label:"收件人地址",prop:"address"}},[r("el-input",{model:{value:t.form.user.address,callback:function(e){t.$set(t.form.user,"address",e)},expression:"form.user.address"}})],1),r("el-form-item",{attrs:{label:"留言"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1)],1)],1):t._e(),r("div",{staticClass:"cart_btn"},[r("el-button",{attrs:{type:"primary",disabled:0===t.active},on:{click:function(e){t.active--}}},[t._v("上一步")]),r("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)])],1)},ye=[],xe=(r(1703),{name:"CartPage",data(){const t=(t,e,r)=>{const a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-]{2,4})$/;if(a.test(e))return r();r(new Error("请输入合法的邮箱"))};return{active:0,coupon:"",form:{user:{name:"ruby",email:"aaa@aa.aa",tel:"12345678",address:"shanghai"},message:""},userFormRules:{name:[{required:!0,message:"请输入收件人姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入收件人电话",trigger:"blur"}],email:[{required:!0,message:"请输入收件人邮箱",trigger:"blur"},{validator:t,trigger:"blur"}],address:[{required:!0,message:"请输入收件人地址",trigger:"blur"}]}}},methods:{...(0,qt.nv)("cartModule",["getCart","removeCartItem"]),addCoupon(){this.$http.post("api/ruby/coupon",{data:{code:this.coupon}}).then((t=>{if(!t.data.success)return this.$message.error(t.data.message);this.$message.success(t.data.message),this.getCart()}))},nextStep(){if(0===this.active){if(0===this.cart.carts.length)return this.$message.info("购物车内无商品");this.active++}else 1===this.active&&this.$refs.userFormRef.validate((t=>{t&&this.$http.post("api/ruby/order",{data:this.form}).then((t=>{if(!t.data.success)return this.$message("成立订单失败");this.$store.dispatch("cartModule/getCart"),this.$router.push(`/checkout?id=${t.data.orderId}`)}))}))}},computed:{couponPlaceholder(){return this.cart.total===this.cart.final_total?"请输入优惠码":"已使用优惠码"},...(0,qt.rn)("cartModule",["cart"])},created(){this.getCart()}}),we=xe,Ce=(0,u.Z)(we,ve,ye,!1,null,"878719ec",null),$e=Ce.exports,ke=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"login_box"},[r("div",{staticClass:"left"}),r("div",{staticClass:"right"},[r("p",[t._v("Welcome back")]),r("h2",[t._v("Login to your admin")]),r("el-form",{ref:"formRef",attrs:{rules:t.formRules,model:t.user}},[r("el-form-item",{attrs:{label:"帐号",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入帐号"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),r("el-button",{attrs:{type:"primary"},on:{click:t.signin}},[t._v("登入")])],1)],1)])])},Pe=[],Oe={name:"LoginPage",data(){return{user:{username:"",password:""},formRules:{username:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{checkLogin(){this.$http.post("api/user/check").then((t=>{t.data.success&&this.$router.push("/admin")}))},signin(){this.$refs.formRef.validate((t=>{t&&this.$http.post("admin/signin",this.user).then((t=>{if(!t.data.success)return this.$message.error("帐号或密码错误，请重新输入！");{const e=t.data.token,r=t.data.expired;document.cookie=`hexToken=${e};expires=${new Date(r)};`,this.$router.push("/admin")}}))}))}},created(){this.checkLogin()}},Se=Oe,Me=(0,u.Z)(Se,ke,Pe,!1,null,"109f5d0e",null),Te=Me.exports,je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticClass:"admin_container"},[r("el-header",[r("router-link",{staticClass:"nav_title",attrs:{to:"/"}},[t._v("BUY SOMETHING")]),r("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.signout}},[t._v("登出")])],1),r("el-container",[r("el-aside",{attrs:{width:"200px"}},[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#555555","text-color":"#fff","active-text-color":"#ffd04b"}},[r("el-menu-item-group",[r("template",{slot:"title"},[t._v("管理员")]),r("router-link",{attrs:{to:"/admin/products"}},[r("el-menu-item",[r("i",{staticClass:"el-icon-s-goods"}),t._v("商品列表 ")])],1),r("router-link",{attrs:{to:"/admin/orders"}},[r("el-menu-item",[r("i",{staticClass:"el-icon-tickets"}),t._v("订单列表 ")])],1),r("router-link",{attrs:{to:"/admin/coupons"}},[r("el-menu-item",[r("i",{staticClass:"el-icon-s-ticket"}),t._v("优惠码列表 ")])],1)],2)],1)],1),r("el-main",[r("router-view")],1)],1)],1)},qe=[],De={name:"AdminDashboard",methods:{signout(){this.$http.post("logout").then((t=>{t.data.success&&this.$router.push("/")}))}},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common["Authorization"]=t}},Re=De,Ue=(0,u.Z)(Re,je,qe,!1,null,"f75f3b4a",null),ze=Ue.exports,Ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v("Welcome")])},Ee=[],Ve={name:"HomePage"},Ne=Ve,Ze=(0,u.Z)(Ne,Ae,Ee,!1,null,null,null),Ie=Ze.exports,Be=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openDialog(!0)}}},[t._v("添加商品")])],1)],1),r("el-table",{attrs:{data:t.products,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"分类",prop:"category"}}),r("el-table-column",{attrs:{label:"产品名称",prop:"title"}}),r("el-table-column",{attrs:{label:"售价",prop:"price"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.row.price))+" ")]}}])}),r("el-table-column",{attrs:{label:"是否启用",prop:"is_enabled"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_enabled?r("el-tag",{attrs:{size:"mini"}},[t._v("是")]):r("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("否")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return t.openDialog(!1,e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.removeItem(e.row.id)}}},[t._v("删除")])]}}])})],1),r("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getProducts}}),r("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[r("el-form",{ref:"formRef",attrs:{model:t.tempProduct,rules:t.formRules,"label-width":"100px"}},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[r("el-input",{model:{value:t.tempProduct.title,callback:function(e){t.$set(t.tempProduct,"title",e)},expression:"tempProduct.title"}})],1),r("el-form-item",{attrs:{label:"商品分类",prop:"category"}},[r("el-input",{model:{value:t.tempProduct.category,callback:function(e){t.$set(t.tempProduct,"category",e)},expression:"tempProduct.category"}})],1),r("el-form-item",{attrs:{label:"商品单位",prop:"unit"}},[r("el-input",{model:{value:t.tempProduct.unit,callback:function(e){t.$set(t.tempProduct,"unit",e)},expression:"tempProduct.unit"}})],1),r("el-form-item",{attrs:{label:"商品原价",prop:"origin_price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.tempProduct.origin_price,callback:function(e){t.$set(t.tempProduct,"origin_price",e)},expression:"tempProduct.origin_price"}})],1),r("el-form-item",{attrs:{label:"商品售价",prop:"price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.tempProduct.price,callback:function(e){t.$set(t.tempProduct,"price",e)},expression:"tempProduct.price"}})],1),r("el-form-item",{attrs:{label:"商品描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.tempProduct.description,callback:function(e){t.$set(t.tempProduct,"description",e)},expression:"tempProduct.description"}})],1),r("el-form-item",{attrs:{label:"商品内容",prop:"content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.tempProduct.content,callback:function(e){t.$set(t.tempProduct,"content",e)},expression:"tempProduct.content"}})],1),r("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[r("el-radio-group",{model:{value:t.tempProduct.is_enabled,callback:function(e){t.$set(t.tempProduct,"is_enabled",e)},expression:"tempProduct.is_enabled"}},[r("el-radio",{attrs:{label:1}},[t._v("是")]),r("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),r("el-form-item",{attrs:{label:"图片网址"}},[r("el-input",{attrs:{placeholder:"请输入图片连结"},model:{value:t.tempProduct.imageUrl,callback:function(e){t.$set(t.tempProduct,"imageUrl",e)},expression:"tempProduct.imageUrl"}})],1),r("el-form-item",{attrs:{label:"或上傳圖片"}},[r("input",{ref:"files",attrs:{type:"file"},on:{change:t.uploadFile}}),r("el-button",{attrs:{type:"text",loading:t.fileUploading}})],1),t.tempProduct.imageUrl?r("div",{staticClass:"preview_image"},[r("img",{staticClass:"cover-fit",attrs:{src:t.tempProduct.imageUrl,alt:"image"}})]):t._e()],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.updataProduct}},[t._v("确定")])],1)],1)],1)},He=[],Ge={name:"AdminProducts",components:{Pagination:Jt},data(){return{products:[],pagination:{},tempProduct:{},isNew:!1,dialogVisible:!1,dialogTitle:"商品",formRules:{title:[{required:!0,message:"请输入商品名称",trigger:"blur"}],category:[{required:!0,message:"请输入商品分类",trigger:"blur"}],unit:[{required:!0,message:"请输入商品单位",trigger:"blur"}],origin_price:[{required:!0,message:"请输入商品原价",trigger:"blur"}],price:[{required:!0,message:"请输入商品售价",trigger:"blur"}],description:[{required:!0,message:"请输入商品描述",trigger:"blur"}],content:[{required:!0,message:"请输入商品内容",trigger:"blur"}],is_enabled:[{required:!0,message:"请选择是否启用",trigger:"blur"}]},fileUploading:!1}},methods:{getProducts(t=1){this.$http.get(`api/ruby/admin/products?page=${t}`).then((t=>{if(!t.data.success)return this.$message.error("获取商品列表失败");this.products=t.data.products,this.pagination=t.data.pagination}))},openDialog(t,e){t?(this.tempProduct={},this.isNew=!0,this.dialogTitle="添加商品"):(this.tempProduct=e,this.isNew=!1,this.dialogTitle="编辑商品"),this.dialogVisible=!0},updataProduct(){this.$refs.formRef.validate((t=>{t&&(this.isNew?this.$http.post("api/ruby/admin/product",{data:this.tempProduct}).then((t=>{if(!t.data.success)return this.$message.error("添加商品失败");this.dialogVisible=!1,this.getProducts(),this.$message.success("添加商品成功")})):this.$http.put(`api/ruby/admin/product/${this.tempProduct.id}`,{data:this.tempProduct}).then((t=>{if(!t.data.success)return this.$message.error("编辑商品失败");this.dialogVisible=!1,this.$message.success("编辑商品成功"),this.getProducts()})))}))},uploadFile(){const t=this.$refs.files.files[0],e=new FormData;e.append("file-to-upload",t),this.fileUploading=!0,this.$http.post("/api/ruby/admin/upload",e,{headers:{"Content-type":"multipart/form-data"}}).then((t=>{this.fileUploading=!1,t.data.success?this.$set(this.tempProduct,"imageUrl",t.data.imageUrl):this.$message.error(t.data.message)}))},removeItem(t){this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$http.delete(`api/ruby/admin/product/${t}`).then((t=>{if(!t.data.success)return this.$message.error("删除商品失败");this.getProducts(),this.$message.success("删除成功!")}))})).catch((()=>{this.$message.info("已取消删除")}))},dialogClose(){this.$refs.formRef.resetFields()}},created(){this.getProducts()}},Fe=Ge,Le=(0,u.Z)(Fe,Be,He,!1,null,"d71f5a60",null),Ye=Le.exports,We=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-table",{attrs:{data:t.orders,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),r("el-table-column",{attrs:{prop:"create_at",label:"购买时间",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.create_at)))]}}])}),r("el-table-column",{attrs:{prop:"user.name",label:"订购人",align:"center",width:"100px"}}),r("el-table-column",{attrs:{label:"购买商品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("ul",{staticClass:"list-unstyled"},t._l(e.row.products,(function(e,a){return r("li",{key:a},[t._v(" "+t._s(e.product.title)+" 數量："+t._s(e.qty)+" "+t._s(e.product.unit)+" ")])})),0)]}}])}),r("el-table-column",{attrs:{prop:"total",label:"应付金额",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.total))+" ")]}}])}),r("el-table-column",{attrs:{prop:"is_paid",label:"是否付款",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_paid?r("el-tag",{attrs:{size:"small"}},[t._v("已付款")]):r("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("未付款")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.openDialog(e.row)}}},[t._v("查看")])]}}])})],1),r("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getOrders}}),r("el-dialog",{attrs:{title:"查看",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("div",{staticClass:"content"},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("订单总金额")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t._f("currency")(t.tempOrder.total)))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("订单成立时间")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t._f("date")(t.tempOrder.create_at)))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人姓名")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.name))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人Email")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.email))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人电话")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.tel))])],1),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("收件人地址")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.address))])],1),t.tempOrder.message?r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("留言")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.message))])],1):t._e(),r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("付款狀態")])]),r("el-col",{attrs:{span:16}},[t.tempOrder.is_paid?r("el-tag",{attrs:{type:"primary"}},[t._v("付款完成")]):r("el-tag",{attrs:{type:"danger"}},[t._v(" 尚未付款 ")])],1)],1),t.tempOrder.is_paid?r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("strong",[t._v("付款时间")])]),r("el-col",{attrs:{span:16}},[t._v(t._s(t._f("date")(t.tempOrder.paid_date)))])],1):t._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 确定 ")])],1)])],1)},Je=[],Xe={name:"AdminOrders",components:{Pagination:Jt},data(){return{orders:[],tempOrder:{user:{}},pagination:{},dialogVisible:!1}},methods:{getOrders(t=1){this.$http.get(`api/ruby/admin/orders?page=${t}`).then((t=>{if(!t.data.success)return this.$message.error("获取订单资料失败");this.orders=t.data.orders,this.pagination=t.data.pagination}))},openDialog(t){this.tempOrder=t,this.dialogVisible=!0},goCheckout(t){this.$router.push(`/checkout?id=${t}`)}},created(){this.getOrders()}},Ke=Xe,Qe=(0,u.Z)(Ke,We,Je,!1,null,"95304788",null),tr=Qe.exports,er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openDialog(!0)}}},[t._v(" 添加优惠码 ")])],1)],1),r("el-table",{attrs:{data:t.coupons,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",lavel:"#"}}),r("el-table-column",{attrs:{label:"名称",prop:"code"}}),r("el-table-column",{attrs:{label:"折扣百分比",prop:"percent"}}),r("el-table-column",{attrs:{label:"到期日",prop:"due_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("date")(e.row.due_date))+" ")]}}])}),r("el-table-column",{attrs:{label:"是否启用",prop:"is_enabled"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_enabled?r("el-tag",{attrs:{size:"mini"}},[t._v("是")]):r("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("否")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return t.openDialog(!1,e.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.removeItem(e.row.id)}}})]}}])})],1),r("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getCoupons}}),r("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[r("el-form",{ref:"formRef",attrs:{model:t.tempCoupon,rules:t.formRules,"label-width":"100px"}},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"优惠码名称",prop:"title"}},[r("el-input",{model:{value:t.tempCoupon.title,callback:function(e){t.$set(t.tempCoupon,"title",e)},expression:"tempCoupon.title"}})],1),r("el-form-item",{attrs:{label:"优惠码",prop:"code"}},[r("el-input",{model:{value:t.tempCoupon.code,callback:function(e){t.$set(t.tempCoupon,"code",e)},expression:"tempCoupon.code"}})],1),r("el-form-item",{attrs:{label:"到期日",prop:"due_date"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.due_date,callback:function(e){t.due_date=e},expression:"due_date"}})],1),r("el-form-item",{attrs:{label:"百分比",prop:"percent"}},[r("el-input",{model:{value:t.tempCoupon.percent,callback:function(e){t.$set(t.tempCoupon,"percent",e)},expression:"tempCoupon.percent"}})],1),r("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[r("el-radio-group",{model:{value:t.tempCoupon.is_enabled,callback:function(e){t.$set(t.tempCoupon,"is_enabled",e)},expression:"tempCoupon.is_enabled"}},[r("el-radio",{attrs:{label:1}},[t._v("是")]),r("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.updataCoupon}},[t._v("确定")])],1)],1)],1)},rr=[],ar={name:"AdminCoupons",components:{Pagination:Jt},data(){return{coupons:[],pagination:{},tempCoupon:{title:"",is_enabled:0,percent:100,due_date:0,code:""},due_date:new Date,isNew:!1,dialogVisible:!1,dialogTitle:"",formRules:{title:[{required:!0,message:"请输入优惠码名称",trigger:"blur"}],code:[{required:!0,message:"请输入优惠码",trigger:"blur"}],is_enabled:[{required:!0,message:"请选择是否启用",trigger:"blur"}],percent:[{required:!0,message:"请输入百分比",trigger:"blur"}],due_date:[{required:!0,message:"请输入优惠码到期日",trigger:"blur"}]}}},methods:{getCoupons(t=1){this.$http.get(`api/ruby/admin/coupons?page=${t}`).then((t=>{if(!t.data.success)return this.$message.error("获取优惠码列表失败");this.coupons=t.data.coupons,this.pagination=t.data.pagination}))},openDialog(t,e){t?(this.tempCoupon={},this.isNew=!0,this.dialogTitle="添加优惠码"):(this.tempCoupon=e,this.isNew=!1,this.dialogTitle="编辑优惠码"),this.dialogVisible=!0},updataCoupon(){this.$refs.formRef.validate((t=>{t&&(this.isNew?this.$http.post("api/ruby/admin/coupon",{data:this.tempCoupon}).then((t=>{if(!t.data.success)return this.$message.error("添加优惠码失败");this.getCoupons(),this.$message.success("添加优惠码成功"),this.dialogVisible=!1})):this.$http.put(`api/ruby/admin/coupon/${this.tempCoupon.id}`,{data:this.tempCoupon}).then((t=>{if(!t.data.success)return this.$message.error("编辑优惠码失败");this.getCoupons(),this.$message.success("编辑优惠码成功"),this.dialogVisible=!1})))}))},removeItem(t){this.$confirm("此操作将永久删除该优惠码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$http.delete(`api/ruby/admin/coupon/${t}`).then((t=>{if(!t.data.success)return this.$message.error("删除优惠码失败");this.$message.success("删除优惠码成功!"),this.getCoupons()}))})).catch((()=>{this.$message.info("已取消删除")}))},dialogClose(){this.$refs.formRef.resetFields()}},created(){this.getCoupons()},watch:{due_date(){const t=Math.floor(new Date(this.due_date)/1e3);this.tempCoupon.due_date=t}}},sr=ar,ir=(0,u.Z)(sr,er,rr,!1,null,"571813d4",null),lr=ir.exports;i["default"].use(Ot.Z);const or=new Ot.Z({routes:[{path:"/",component:zt,children:[{path:"/",component:It},{path:"/products",component:te},{path:"/product",component:le},{path:"/orders",component:pe},{path:"/cart",component:$e},{path:"/checkout",component:be}]},{path:"/login",component:Te,name:"login"},{path:"/admin",component:ze,meta:{isAuth:!0},children:[{path:"/",component:Ie,meta:{isAuth:!0}},{path:"products",component:Ye,meta:{isAuth:!0}},{path:"orders",component:tr,meta:{isAuth:!0}},{path:"coupons",component:lr,meta:{isAuth:!0}}]}]});or.beforeEach(((t,e,r)=>{t.meta.isAuth?Mt().post("api/user/check").then((t=>{t.data.success?r():r({name:"login"})})):r()}));var nr=or;function cr(t){return new Date(1e3*t).toLocaleDateString()}function ur(t){const e=Number(t);return`$${e.toFixed(0).replace(/./g,((t,e,r)=>{const a=e&&"."!==t&&(r.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t;return a}))}`}var dr={namespaced:!0,state:{cart:{carts:[]}},mutations:{CART(t,e){t.cart=e}},actions:{getCart(t){Mt().get("api/ruby/cart").then((e=>{t.commit("CART",e.data.data)}))},addToCart(t,{id:e,qty:r}){const a={product_id:e,qty:r};Mt().post("api/ruby/cart",{data:a}).then((e=>{if("已加入購物車"!==e.data.message)return h().error("加入购物车失败");h().success("商品已加入购物车"),t.dispatch("getCart")}))},removeCartItem(t,e){Mt()["delete"](`api/ruby/cart/${e}`).then((e=>{if(!e.data.success)return h().error("删除购物车商品失败");h().success("购物车商品已删除"),t.dispatch("getCart")}))}}},pr={namespaced:!0,state:{products:[],pagination:{}},mutations:{PRODUCTS(t,e){t.products=e},PAGINATION(t,e){t.pagination=e}},actions:{getProducts(t,e){Mt().get(`api/ruby/products?page=${e}`).then((e=>{if(!e.data.success)return h().error("获取商品资料失败");t.commit("PRODUCTS",e.data.products),t.commit("PAGINATION",e.data.pagination)}))}}};i["default"].use(qt.ZP);var mr=new qt.ZP.Store({actions:{checkLogin(t){Mt().post("api/user/check").then((e=>{e.data.success?t.commit("LOGIN",!0):t.commit("LOGIN",!1)}))}},mutations:{LOGIN(t,e){t.login=e}},state:{login:!1},modules:{cartModule:dr,productModule:pr}});Mt().defaults.baseURL="https://vue-course-api.hexschool.io/",Mt().interceptors.request.use((t=>(s().service(),t))),Mt().interceptors.response.use((t=>(s().service().close(),t))),i["default"].prototype.$http=Mt(),i["default"].config.productionTip=!1,i["default"].filter("date",cr),i["default"].filter("currency",ur),new i["default"]({el:"#app",router:nr,store:mr,render:t=>t(p)})}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,i){if(!a){var l=1/0;for(u=0;u<t.length;u++){a=t[u][0],s=t[u][1],i=t[u][2];for(var o=!0,n=0;n<a.length;n++)(!1&i||l>=i)&&Object.keys(r.O).every((function(t){return r.O[t](a[n])}))?a.splice(n--,1):(o=!1,i<l&&(l=i));if(o){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,s,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,i,l=a[0],o=a[1],n=a[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(n)var u=n(r)}for(e&&e(a);c<l.length;c++)i=l[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(u)},a=self["webpackChunkshop"]=self["webpackChunkshop"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(5831)}));a=r.O(a)})();
//# sourceMappingURL=app.4974384f.js.map