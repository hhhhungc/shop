(function(){"use strict";var t={5831:function(t,e,a){var r=a(8307),s=a.n(r),n=(a(6992),a(8674),a(9601),a(7727),a(7327),a(1539),a(8935)),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],l={name:"App"},c=l,u=a(1001),d=(0,u.Z)(c,o,i,!1,null,null,null),p=d.exports,f=a(2747),m=a.n(f),g=a(7349),h=a.n(g),v=a(5165),_=a.n(v),b=a(8985),y=a.n(b),x=a(3280),w=a.n(x),C=a(3329),k=a.n(C),$=a(3388),P=a.n($),O=a(9221),S=a.n(O),M=a(5571),T=a.n(M),j=a(1031),q=a.n(j),Z=a(672),D=a.n(Z),R=a(2244),U=a.n(R),z=a(4863),A=a.n(z),E=a(6756),V=a.n(E),N=a(5263),I=a.n(N),B=a(2711),H=a.n(B),G=a(1248),F=a.n(G),L=a(1704),Y=a.n(L),W=a(2245),J=a.n(W),X=a(8114),K=a.n(X),Q=a(9014),tt=a.n(Q),et=a(736),at=a.n(et),rt=a(4462),st=a.n(rt),nt=a(5423),ot=a.n(nt),it=a(2319),lt=a.n(it),ct=a(8782),ut=a.n(ct),dt=a(8807),pt=a.n(dt),ft=a(3711),mt=a.n(ft),gt=a(9595),ht=a.n(gt),vt=a(5040),_t=a.n(vt),bt=a(1554),yt=a.n(bt),xt=a(7694),wt=a.n(xt),Ct=a(8538),kt=a.n(Ct),$t=a(1192),Pt=a.n($t);n["default"].use(Pt()),n["default"].use(kt()),n["default"].use(wt()),n["default"].use(yt()),n["default"].use(_t()),n["default"].use(ht()),n["default"].use(mt()),n["default"].use(pt()),n["default"].use(ut()),n["default"].use(lt()),n["default"].use(ot()),n["default"].use(st()),n["default"].use(at()),n["default"].use(tt()),n["default"].use(K()),n["default"].use(J()),n["default"].use(Y()),n["default"].use(F()),n["default"].use(H()),n["default"].use(I()),n["default"].use(V()),n["default"].use(A()),n["default"].use(U()),n["default"].use(D()),n["default"].use(q()),n["default"].use(T()),n["default"].use(S()),n["default"].use(P()),n["default"].use(k()),n["default"].use(w()),n["default"].use(y()),n["default"].use(_()),n["default"].prototype.$message=h(),n["default"].prototype.$confirm=m().confirm;var Ot=a(2809),St=a(6166),Mt=a.n(St),Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("ul",{staticClass:"list-unstyled"},[a("li",[a("router-link",{staticClass:"nav_title",attrs:{to:"/"}},[t._v(" BUY SOMETHING ")])],1),a("li",[a("router-link",{attrs:{to:"/products"}},[t._v(" 產品列表 ")])],1),a("li",[a("router-link",{attrs:{to:"/orders"}},[t._v(" 訂單列表 ")])],1)]),a("ul",{staticClass:"list-unstyled"},[a("li",{staticClass:"cart"},[a("span",{staticClass:"cart_num"},[t._v(t._s(t.cart.carts.length))]),a("router-link",{attrs:{to:"/cart"}},[t._v(" 购物车"),a("span",{staticClass:"iconfont icon-cartfill"})])],1),!1===t.login?a("li",[a("router-link",{attrs:{to:"/login"}},[t._v(" 登入"),a("i",{staticClass:"el-icon-user-solid"})])],1):a("li",[a("router-link",{attrs:{to:"/admin"}},[t._v(" 管理员"),a("i",{staticClass:"el-icon-user-solid"})])],1)])]),a("el-main",[a("router-view")],1),a("el-footer",[t._v(" 本网站所有内容及资料全部来自网路，仅供网页开发练习使用，若有侵权请告知。 ")])],1)},jt=[],qt=a(3019),Zt=a(4665),Dt={name:"NavbarComponent",data:function(){return{}},methods:(0,qt.Z)((0,qt.Z)({},(0,Zt.nv)(["checkLogin"])),(0,Zt.nv)("cartModule",["getCart"])),computed:(0,qt.Z)((0,qt.Z)({},(0,Zt.rn)(["login"])),(0,Zt.rn)("cartModule",["cart"])),created:function(){this.checkLogin(),this.getCart()}},Rt=Dt,Ut=(0,u.Z)(Rt,Tt,jt,!1,null,"617746bb",null),zt=Ut.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"wrap"},[a("h2",[t._v("最新消息")]),a("div",{staticClass:"wrapper"},t._l(t.news,(function(e){return a("div",{key:e.title,staticClass:"box"},[a("div",{staticClass:"imageBox"},[a("img",{attrs:{src:e.imageUrl}})]),a("div",{staticClass:"content"},[a("h3",[t._v(t._s(e.title))])])])})),0)]),a("h2",[t._v("近期活动")]),a("el-carousel",{attrs:{"indicator-position":"outside"}},t._l(t.campaign,(function(e){return a("el-carousel-item",{key:e.title},[a("h3",[t._v(t._s(e.title))])])})),1),a("h2",[t._v("三大特色")]),a("el-row",{staticStyle:{margin:"40px 0"},attrs:{gutter:20,type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"iconfont icon-truck"}),a("h4",[t._v("免运费")]),a("p",[t._v("全站购物满 $3,000 元，境内免收运费。")])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"iconfont icon-money_refund_fill"}),a("h4",[t._v("100% 退换货")]),a("p",[t._v("商品全新、无拆封，可享受「7天无理由退换货」服务！")])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"iconfont icon-chalkboard-teacher"}),a("h4",[t._v("24 小时客服")]),a("p",[t._v("24 小时客服在线，有问题随时发问，即时回覆。")])])],1)],1)},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"header_bn"},[a("div",{staticClass:"mask"}),a("div",{staticClass:"header_text"},[t._v("BUY"),a("br"),t._v("SOMETHING")])])])}],Vt={name:"HomePage",data:function(){return{news:[{title:"JUST DO IT",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1615290642882-6b9501729a27?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MjV8fG5pa2V8ZW58MHx8MHx8&auto=format&fit=crop&w=800&q=80"},{title:"Adidas",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1518002171953-a080ee817e1f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"},{title:"Converse",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1622253543934-c3cb280f8323?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"}],campaign:[{title:"Vans",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1531185038189-41815d864f32?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1325&q=80"},{title:"PUMA",imageUrl:"https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1633523154731-d131470565d7?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NXx8cHVtYXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=800&q=80"}]}}},Nt=Vt,It=(0,u.Z)(Nt,At,Et,!1,null,"6c532817",null),Bt=It.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("ul",{staticClass:"list-unstyled"},[a("li",{staticClass:"title"},[t._v("排序")]),a("li",[a("el-button",{class:{active:"price"===t.sortBy&&!1===t.isReverse},staticStyle:{padding:"20px"},attrs:{type:"text"},on:{click:function(e){t.sortBy="price",t.isReverse=!1}}},[t._v(" 商品价格由高至低 ")])],1),a("li",[a("el-button",{class:{active:"price"===t.sortBy&&!0===t.isReverse},staticStyle:{padding:"20px"},attrs:{type:"text"},on:{click:function(e){t.sortBy="price",t.isReverse=!0}}},[t._v(" 商品价格由低至高 ")])],1)])]),a("el-col",{attrs:{span:18}},[a("el-row",{attrs:{gutter:20}},t._l(t.filterDate,(function(e){return a("el-col",{key:e.id,attrs:{span:12}},[a("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("div",{staticClass:"image"},[a("img",{staticClass:"cover-fit",attrs:{src:e.imageUrl,alt:e.title,title:e.title}})]),a("div",{staticClass:"text"},[a("h4",[t._v(t._s(e.title))]),a("p",[t._v("$ "+t._s(e.price))]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(a){return t.goProductPage(e.id)}}},[t._v("查看商品")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(a){return t.addToCart(e.id)}}},[t._v("加入购物车")])],1)])])],1)})),1),a("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getProducts}})],1)],1)],1)])},Gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"header_mask"},[a("p",[t._v("BUY SOMETHING NOW !!!")])])])}],Ft=(a(8862),a(2707),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,layout:"prev, pager, next","page-size":t.pageSize,total:t.pagination.total_pages*t.pageSize},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)}),Lt=[],Yt={name:"PaginationComponent",props:["pagination"],data:function(){return{pageSize:10,currentPage:1}},methods:{handleCurrentChange:function(t){this.$emit("updatePage",t)}}},Wt=Yt,Jt=(0,u.Z)(Wt,Ft,Lt,!1,null,"b05160aa",null),Xt=Jt.exports,Kt={name:"ProductsPage",components:{Pagination:Xt},data:function(){return{sortBy:"",isReverse:!0}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("productModule/getProducts",t)},goProductPage:function(t){this.$router.push("/product?id=".concat(t))},addToCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("cartModule/addToCart",{id:t,qty:e})}},computed:(0,qt.Z)((0,qt.Z)({},(0,Zt.rn)("productModule",["products","pagination"])),{},{filterDate:function(){var t=this,e=this.sortBy,a=JSON.parse(JSON.stringify(this.products)),r=a.sort((function(a,r){return a=a[e],r=r[e],t.isReverse?a-r:r-a}));return r}}),created:function(){this.getProducts()}},Qt=Kt,te=(0,u.Z)(Qt,Ht,Gt,!1,null,"e7fe2e94",null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"image"},[a("img",{staticClass:"rounded cover-fit",attrs:{src:t.product.imageUrl,alt:t.product.title}})])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"text"},[a("ul",{staticClass:"list-unstyled"},[a("li",[a("h2",[t._v(t._s(t.product.title))])]),a("li",[a("small",[t._v(t._s(t.product.content))])]),a("li",[a("el-divider")],1),a("li",{staticClass:"cate"},[t._v("分類 : "+t._s(t.product.category))]),a("li",{staticClass:"price"},[t._v(t._s(t._f("currency")(t.product.price)))]),a("li",[a("el-divider")],1)]),a("div",{staticClass:"text_btn"},[a("el-input-number",{attrs:{min:1,max:10,label:"商品数量"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.addToCart}},[t._v("加入購物車")])],1)])]),a("el-col",{staticClass:"bottom"},[a("el-tabs",{staticStyle:{"min-height":"300px"},attrs:{type:"border-card",stretch:""}},[a("el-tab-pane",{attrs:{label:"商品描述"}},[t._v(t._s(t.product.description))]),a("el-tab-pane",{attrs:{label:"退换或须知"}},[a("ul",[a("li",[t._v(" 商品到貨享十天猶豫期之權益，辦理退貨商品必須是全新狀態且包裝完整，商品一經拆封，等同商品價值已受損，僅能以福利品出售，若需退換貨，我方須收取價值損失之費用(回復原狀、整新費)，請先確認商品正確、外觀可接受，再行開機/使用，以免影響您的權利，祝您購物順心。 ")]),a("li",[t._v(" 個人衛生用品除商品本身有瑕疵外，未拆封商品仍享有十天猶豫期之退貨權利。但已拆封 (如剪標、下水等情形…)，本公司無法接受退換貨。 ")])])]),a("el-tab-pane",{attrs:{label:"常见问答"}},[a("ol",[a("li",[a("b",[t._v("訂單可以免運費嗎？")]),a("br"),t._v(" 會員的所有訂單都可享受免費的普通達配送服務。普通達配送的訂單通常會在 3-6 天內送達。 ")]),a("li",[a("b",[t._v("訂單如何退貨？")]),a("br"),t._v(" 掃描商品外包裝箱側面 / 黑色外包裝袋上的「官網退換貨」二維碼，或者直接掃碼下圖二維碼，開啟退貨。 ")]),a("li",[a("b",[t._v("訂單如何退貨？")]),a("br"),t._v(" 要獲得訂單的退款，您首先要辦理退貨。收到並處理了您的退貨後，如果退貨成功，我們將立即處理您的退款。在我們處理退款時，您會收到電子郵件通知。 ")]),a("li",[a("b",[t._v("如何找到適合您的尺碼？")]),a("br"),t._v(" 我們的尺碼表可以就您所選擇的男鞋、女鞋、服裝、配件來幫您確定合適的尺碼。點擊產品詳情頁面所顯示的「尺碼表」。 ")])])])],1)],1)],1)],1)},re=[],se={name:"ProductPage",data:function(){return{product:{},num:1}},methods:{getProduct:function(t){var e=this;this.$http.get("api/ruby/product/".concat(t)).then((function(t){if(!t.data.success)return e.$message.error("获取商品资料失败");e.product=t.data.product}))},addToCart:function(){this.$store.dispatch("cartModule/addToCart",{id:this.product.id,qty:this.num})}},created:function(){this.getProduct(this.$route.query.id)}},ne=se,oe=(0,u.Z)(ne,ae,re,!1,null,"ad691920",null),ie=oe.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-table",{attrs:{data:t.orders,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),a("el-table-column",{attrs:{prop:"create_at",label:"购买时间",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.create_at)))]}}])}),a("el-table-column",{attrs:{prop:"user.name",label:"订购人",align:"center",width:"100px"}}),a("el-table-column",{attrs:{label:"购买商品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticClass:"list-unstyled"},t._l(e.row.products,(function(e,r){return a("li",{key:r},[t._v(" "+t._s(e.product.title)+" 數量："+t._s(e.qty)+" "+t._s(e.product.unit)+" ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"total",label:"应付金额",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.total))+" ")]}}])}),a("el-table-column",{attrs:{prop:"is_paid",label:"是否付款",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_paid?a("el-tag",{attrs:{size:"small"}},[t._v("已付款")]):a("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("未付款")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.goCheckout(e.row.id)}}},[t._v("查看")])]}}])})],1),a("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getOrders}})],1)},ce=[],ue={name:"OrdersPage",components:{Pagination:Xt},data:function(){return{orders:[],tempOrder:{},pagination:{}}},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("api/ruby/orders?page=".concat(e)).then((function(e){if(!e.data.success)return t.$message.error("获取订单资料失败");t.orders=e.data.orders,t.pagination=e.data.pagination}))},goCheckout:function(t){this.$router.push("/checkout?id=".concat(t))}},created:function(){this.getOrders()}},de=ue,pe=(0,u.Z)(de,le,ce,!1,null,null,null),fe=pe.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"step"},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"确认订单"}}),a("el-step",{attrs:{title:"付款资讯"}}),a("el-step",{attrs:{title:"确认付款"}}),a("el-step",{attrs:{title:"付款完成"}})],1)],1),a("el-card",[a("div",{staticClass:"content"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("订单总金额")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t._f("currency")(t.order.total)))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("订单成立时间")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t._f("date")(t.order.create_at)))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人姓名")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.name))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人Email")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.email))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人电话")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.tel))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人地址")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.order.user.address))])],1),t.order.message?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("留言")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.order.message))])],1):t._e(),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("付款狀態")])]),a("el-col",{attrs:{span:16}},[t.order.is_paid?a("el-tag",{attrs:{type:"primary"}},[t._v("付款完成")]):a("el-tag",{attrs:{type:"danger"}},[t._v("尚未付款")])],1)],1)],1),t.order.is_paid?t._e():a("div",{staticClass:"cart_btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.payOrder}},[t._v("确认付款")])],1)])],1)},ge=[],he={name:"CheckouutPage",data:function(){return{active:2,orderId:"",order:{user:{}}}},methods:{getOrder:function(){var t=this;this.$http.get("api/ruby/order/".concat(this.orderId)).then((function(e){if(!e.data.success)return t.$message.error("获取订单资料失败");t.order=e.data.order,e.data.order.is_paid&&(t.active=4)}))},payOrder:function(){var t=this;this.$http.post("api/ruby/pay/".concat(this.orderId)).then((function(e){if(!e.data.success)return t.$message.error("订单付款失败");t.getOrder(),t.$message.success("订单付款完成"),t.active=4}))}},created:function(){this.orderId=this.$route.query.id,this.getOrder()}},ve=he,_e=(0,u.Z)(ve,me,ge,!1,null,"237ad53b",null),be=_e.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"step"},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"确认订单"}}),a("el-step",{attrs:{title:"付款资讯"}}),a("el-step",{attrs:{title:"确认付款"}}),a("el-step",{attrs:{title:"付款完成"}})],1)],1),a("el-card",[0===t.active?a("div",[a("el-table",{attrs:{data:t.cart.carts,stripe:"","empty-text":"购物车内无商品"}},[a("el-table-column",{attrs:{align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(a){return t.removeCartItem(e.row.id)}}})]}}],null,!1,188722867)}),a("el-table-column",{attrs:{label:"产品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"160px",height:"160px"},attrs:{src:t.row.product.imageUrl,alt:t.row.product.title,title:t.row.product.title}})]}}],null,!1,4201574226)}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/product?id="+e.row.product.id}},[t._v(t._s(e.row.product.title))])]}}],null,!1,2300050751)}),a("el-table-column",{attrs:{prop:"total",label:"单价",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.total)))]}}],null,!1,713166017)}),a("el-table-column",{attrs:{prop:"qty",label:"数量",align:"center",width:"100px"}}),a("el-table-column",{attrs:{prop:"final_total",label:"总价",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.final_total)))]}}],null,!1,2634391666)})],1),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.couponPlaceholder,disabled:t.cart.total!==t.cart.final_total},model:{value:t.coupon,callback:function(e){t.coupon=e},expression:"coupon"}},[a("el-button",{attrs:{slot:"append",disabled:t.cart.total!==t.cart.final_total},on:{click:t.addCoupon},slot:"append"},[t._v(t._s(t.cart.total!==t.cart.final_total?"已使用":"使用"))])],1)],1),a("el-col",{attrs:{span:8}},[a("ul",{staticClass:"list-unstyled"},[a("li",[t._v(" 总金额 "),a("p",[t._v(t._s(t._f("currency")(t.cart.total)))])]),a("li",[t._v(" 折扣金额 "),a("p",[t._v(t._s(t.cart.final_total-t.cart.total))])]),a("li",{staticClass:"border-top"},[t._v(" 最后金额 "),a("p",[t._v(t._s(t._f("currency")(t.cart.final_total)))])])])])],1)],1):t._e(),1===t.active?a("div",[a("el-form",{ref:"userFormRef",attrs:{model:t.form.user,"label-width":"100px",rules:t.userFormRules}},[a("el-form-item",{attrs:{label:"收件人姓名",prop:"name"}},[a("el-input",{model:{value:t.form.user.name,callback:function(e){t.$set(t.form.user,"name",e)},expression:"form.user.name"}})],1),a("el-form-item",{attrs:{label:"收件人电话",prop:"tel"}},[a("el-input",{model:{value:t.form.user.tel,callback:function(e){t.$set(t.form.user,"tel",e)},expression:"form.user.tel"}})],1),a("el-form-item",{attrs:{label:"收件人邮箱",prop:"email"}},[a("el-input",{model:{value:t.form.user.email,callback:function(e){t.$set(t.form.user,"email",e)},expression:"form.user.email"}})],1),a("el-form-item",{attrs:{label:"收件人地址",prop:"address"}},[a("el-input",{model:{value:t.form.user.address,callback:function(e){t.$set(t.form.user,"address",e)},expression:"form.user.address"}})],1),a("el-form-item",{attrs:{label:"留言"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1)],1)],1):t._e(),a("div",{staticClass:"cart_btn"},[a("el-button",{attrs:{type:"primary",disabled:0===t.active},on:{click:function(e){t.active--}}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)])],1)},xe=[],we=(a(4916),a(7601),a(1703),{name:"CartPage",data:function(){var t=function(t,e,a){var r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-]{2,4})$/;if(r.test(e))return a();a(new Error("请输入合法的邮箱"))};return{active:0,coupon:"",form:{user:{name:"ruby",email:"aaa@aa.aa",tel:"12345678",address:"shanghai"},message:""},userFormRules:{name:[{required:!0,message:"请输入收件人姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入收件人电话",trigger:"blur"}],email:[{required:!0,message:"请输入收件人邮箱",trigger:"blur"},{validator:t,trigger:"blur"}],address:[{required:!0,message:"请输入收件人地址",trigger:"blur"}]}}},methods:(0,qt.Z)((0,qt.Z)({},(0,Zt.nv)("cartModule",["getCart","removeCartItem"])),{},{addCoupon:function(){var t=this;this.$http.post("api/ruby/coupon",{data:{code:this.coupon}}).then((function(e){if(!e.data.success)return t.$message.error(e.data.message);t.$message.success(e.data.message),t.getCart()}))},nextStep:function(){var t=this;if(0===this.active){if(0===this.cart.carts.length)return this.$message.info("购物车内无商品");this.active++}else 1===this.active&&this.$refs.userFormRef.validate((function(e){e&&t.$http.post("api/ruby/order",{data:t.form}).then((function(e){if(!e.data.success)return t.$message("成立订单失败");t.$store.dispatch("cartModule/getCart"),t.$router.push("/checkout?id=".concat(e.data.orderId))}))}))}}),computed:(0,qt.Z)({couponPlaceholder:function(){return this.cart.total===this.cart.final_total?"请输入优惠码":"已使用优惠码"}},(0,Zt.rn)("cartModule",["cart"])),created:function(){this.getCart()}}),Ce=we,ke=(0,u.Z)(Ce,ye,xe,!1,null,"878719ec",null),$e=ke.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"login_box"},[a("div",{staticClass:"left"}),a("div",{staticClass:"right"},[a("p",[t._v("Welcome back")]),a("h2",[t._v("Login to your admin")]),a("el-form",{ref:"formRef",attrs:{rules:t.formRules,model:t.user}},[a("el-form-item",{attrs:{label:"帐号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入帐号"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.signin}},[t._v("登入")])],1)],1)])])},Oe=[],Se=(a(2222),{name:"LoginPage",data:function(){return{user:{username:"",password:""},formRules:{username:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{checkLogin:function(){var t=this;this.$http.post("api/user/check").then((function(e){e.data.success&&t.$router.push("/admin")}))},signin:function(){var t=this;this.$refs.formRef.validate((function(e){e&&t.$http.post("admin/signin",t.user).then((function(e){if(!e.data.success)return t.$message.error("帐号或密码错误，请重新输入！");var a=e.data.token,r=e.data.expired;document.cookie="hexToken=".concat(a,";expires=").concat(new Date(r),";"),t.$router.push("/admin")}))}))}},created:function(){this.checkLogin()}}),Me=Se,Te=(0,u.Z)(Me,Pe,Oe,!1,null,"109f5d0e",null),je=Te.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"admin_container"},[a("el-header",[a("router-link",{staticClass:"nav_title",attrs:{to:"/"}},[t._v("BUY SOMETHING")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.signout}},[t._v("登出")])],1),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#555555","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item-group",[a("template",{slot:"title"},[t._v("管理员")]),a("router-link",{attrs:{to:"/admin/products"}},[a("el-menu-item",[a("i",{staticClass:"el-icon-s-goods"}),t._v("商品列表 ")])],1),a("router-link",{attrs:{to:"/admin/orders"}},[a("el-menu-item",[a("i",{staticClass:"el-icon-tickets"}),t._v("订单列表 ")])],1),a("router-link",{attrs:{to:"/admin/coupons"}},[a("el-menu-item",[a("i",{staticClass:"el-icon-s-ticket"}),t._v("优惠码列表 ")])],1)],2)],1)],1),a("el-main",[a("router-view")],1)],1)],1)},Ze=[],De=(a(5306),{name:"AdminDashboard",methods:{signout:function(){var t=this;this.$http.post("logout").then((function(e){e.data.success&&t.$router.push("/")}))}},created:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common["Authorization"]=t}}),Re=De,Ue=(0,u.Z)(Re,qe,Ze,!1,null,"f75f3b4a",null),ze=Ue.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("Welcome")])},Ee=[],Ve={name:"HomePage"},Ne=Ve,Ie=(0,u.Z)(Ne,Ae,Ee,!1,null,null,null),Be=Ie.exports,He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openDialog(!0)}}},[t._v("添加商品")])],1)],1),a("el-table",{attrs:{data:t.products,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"分类",prop:"category"}}),a("el-table-column",{attrs:{label:"产品名称",prop:"title"}}),a("el-table-column",{attrs:{label:"售价",prop:"price"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.row.price))+" ")]}}])}),a("el-table-column",{attrs:{label:"是否启用",prop:"is_enabled"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_enabled?a("el-tag",{attrs:{size:"mini"}},[t._v("是")]):a("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("否")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.openDialog(!1,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeItem(e.row.id)}}},[t._v("删除")])]}}])})],1),a("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getProducts}}),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formRef",attrs:{model:t.tempProduct,rules:t.formRules,"label-width":"100px"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[a("el-input",{model:{value:t.tempProduct.title,callback:function(e){t.$set(t.tempProduct,"title",e)},expression:"tempProduct.title"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"category"}},[a("el-input",{model:{value:t.tempProduct.category,callback:function(e){t.$set(t.tempProduct,"category",e)},expression:"tempProduct.category"}})],1),a("el-form-item",{attrs:{label:"商品单位",prop:"unit"}},[a("el-input",{model:{value:t.tempProduct.unit,callback:function(e){t.$set(t.tempProduct,"unit",e)},expression:"tempProduct.unit"}})],1),a("el-form-item",{attrs:{label:"商品原价",prop:"origin_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.tempProduct.origin_price,callback:function(e){t.$set(t.tempProduct,"origin_price",e)},expression:"tempProduct.origin_price"}})],1),a("el-form-item",{attrs:{label:"商品售价",prop:"price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.tempProduct.price,callback:function(e){t.$set(t.tempProduct,"price",e)},expression:"tempProduct.price"}})],1),a("el-form-item",{attrs:{label:"商品描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.tempProduct.description,callback:function(e){t.$set(t.tempProduct,"description",e)},expression:"tempProduct.description"}})],1),a("el-form-item",{attrs:{label:"商品内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.tempProduct.content,callback:function(e){t.$set(t.tempProduct,"content",e)},expression:"tempProduct.content"}})],1),a("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[a("el-radio-group",{model:{value:t.tempProduct.is_enabled,callback:function(e){t.$set(t.tempProduct,"is_enabled",e)},expression:"tempProduct.is_enabled"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",{attrs:{label:"图片网址"}},[a("el-input",{attrs:{placeholder:"请输入图片连结"},model:{value:t.tempProduct.imageUrl,callback:function(e){t.$set(t.tempProduct,"imageUrl",e)},expression:"tempProduct.imageUrl"}})],1),a("el-form-item",{attrs:{label:"或上傳圖片"}},[a("input",{ref:"files",attrs:{type:"file"},on:{change:t.uploadFile}}),a("el-button",{attrs:{type:"text",loading:t.fileUploading}})],1),t.tempProduct.imageUrl?a("div",{staticClass:"preview_image"},[a("img",{staticClass:"cover-fit",attrs:{src:t.tempProduct.imageUrl,alt:"image"}})]):t._e()],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updataProduct}},[t._v("确定")])],1)],1)],1)},Ge=[],Fe={name:"AdminProducts",components:{Pagination:Xt},data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,dialogVisible:!1,dialogTitle:"商品",formRules:{title:[{required:!0,message:"请输入商品名称",trigger:"blur"}],category:[{required:!0,message:"请输入商品分类",trigger:"blur"}],unit:[{required:!0,message:"请输入商品单位",trigger:"blur"}],origin_price:[{required:!0,message:"请输入商品原价",trigger:"blur"}],price:[{required:!0,message:"请输入商品售价",trigger:"blur"}],description:[{required:!0,message:"请输入商品描述",trigger:"blur"}],content:[{required:!0,message:"请输入商品内容",trigger:"blur"}],is_enabled:[{required:!0,message:"请选择是否启用",trigger:"blur"}]},fileUploading:!1}},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("api/ruby/admin/products?page=".concat(e)).then((function(e){if(!e.data.success)return t.$message.error("获取商品列表失败");t.products=e.data.products,t.pagination=e.data.pagination}))},openDialog:function(t,e){t?(this.tempProduct={},this.isNew=!0,this.dialogTitle="添加商品"):(this.tempProduct=e,this.isNew=!1,this.dialogTitle="编辑商品"),this.dialogVisible=!0},updataProduct:function(){var t=this;this.$refs.formRef.validate((function(e){e&&(t.isNew?t.$http.post("api/ruby/admin/product",{data:t.tempProduct}).then((function(e){if(!e.data.success)return t.$message.error("添加商品失败");t.dialogVisible=!1,t.getProducts(),t.$message.success("添加商品成功")})):t.$http.put("api/ruby/admin/product/".concat(t.tempProduct.id),{data:t.tempProduct}).then((function(e){if(!e.data.success)return t.$message.error("编辑商品失败");t.dialogVisible=!1,t.$message.success("编辑商品成功"),t.getProducts()})))}))},uploadFile:function(){var t=this,e=this.$refs.files.files[0],a=new FormData;a.append("file-to-upload",e),this.fileUploading=!0,this.$http.post("/api/ruby/admin/upload",a,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){t.fileUploading=!1,e.data.success?t.$set(t.tempProduct,"imageUrl",e.data.imageUrl):t.$message.error(e.data.message)}))},removeItem:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("api/ruby/admin/product/".concat(t)).then((function(t){if(!t.data.success)return e.$message.error("删除商品失败");e.getProducts(),e.$message.success("删除成功!")}))})).catch((function(){e.$message.info("已取消删除")}))},dialogClose:function(){this.$refs.formRef.resetFields()}},created:function(){this.getProducts()}},Le=Fe,Ye=(0,u.Z)(Le,He,Ge,!1,null,"d71f5a60",null),We=Ye.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{data:t.orders,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),a("el-table-column",{attrs:{prop:"create_at",label:"购买时间",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.create_at)))]}}])}),a("el-table-column",{attrs:{prop:"user.name",label:"订购人",align:"center",width:"100px"}}),a("el-table-column",{attrs:{label:"购买商品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("ul",{staticClass:"list-unstyled"},t._l(e.row.products,(function(e,r){return a("li",{key:r},[t._v(" "+t._s(e.product.title)+" 數量："+t._s(e.qty)+" "+t._s(e.product.unit)+" ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"total",label:"应付金额",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("currency")(e.row.total))+" ")]}}])}),a("el-table-column",{attrs:{prop:"is_paid",label:"是否付款",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_paid?a("el-tag",{attrs:{size:"small"}},[t._v("已付款")]):a("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("未付款")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.openDialog(e.row)}}},[t._v("查看")])]}}])})],1),a("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getOrders}}),a("el-dialog",{attrs:{title:"查看",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"content"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("订单总金额")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t._f("currency")(t.tempOrder.total)))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("订单成立时间")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t._f("date")(t.tempOrder.create_at)))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人姓名")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.name))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人Email")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.email))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人电话")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.tel))])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("收件人地址")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.user.address))])],1),t.tempOrder.message?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("留言")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t.tempOrder.message))])],1):t._e(),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("付款狀態")])]),a("el-col",{attrs:{span:16}},[t.tempOrder.is_paid?a("el-tag",{attrs:{type:"primary"}},[t._v("付款完成")]):a("el-tag",{attrs:{type:"danger"}},[t._v(" 尚未付款 ")])],1)],1),t.tempOrder.is_paid?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("strong",[t._v("付款时间")])]),a("el-col",{attrs:{span:16}},[t._v(t._s(t._f("date")(t.tempOrder.paid_date)))])],1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 确定 ")])],1)])],1)},Xe=[],Ke={name:"AdminOrders",components:{Pagination:Xt},data:function(){return{orders:[],tempOrder:{user:{}},pagination:{},dialogVisible:!1}},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("api/ruby/admin/orders?page=".concat(e)).then((function(e){if(!e.data.success)return t.$message.error("获取订单资料失败");t.orders=e.data.orders,t.pagination=e.data.pagination}))},openDialog:function(t){this.tempOrder=t,this.dialogVisible=!0},goCheckout:function(t){this.$router.push("/checkout?id=".concat(t))}},created:function(){this.getOrders()}},Qe=Ke,ta=(0,u.Z)(Qe,Je,Xe,!1,null,"95304788",null),ea=ta.exports,aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openDialog(!0)}}},[t._v(" 添加优惠码 ")])],1)],1),a("el-table",{attrs:{data:t.coupons,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",lavel:"#"}}),a("el-table-column",{attrs:{label:"名称",prop:"code"}}),a("el-table-column",{attrs:{label:"折扣百分比",prop:"percent"}}),a("el-table-column",{attrs:{label:"到期日",prop:"due_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("date")(e.row.due_date))+" ")]}}])}),a("el-table-column",{attrs:{label:"是否启用",prop:"is_enabled"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_enabled?a("el-tag",{attrs:{size:"mini"}},[t._v("是")]):a("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("否")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.openDialog(!1,e.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeItem(e.row.id)}}})]}}])})],1),a("Pagination",{attrs:{pagination:t.pagination},on:{updatePage:t.getCoupons}}),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose}},[a("el-form",{ref:"formRef",attrs:{model:t.tempCoupon,rules:t.formRules,"label-width":"100px"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"优惠码名称",prop:"title"}},[a("el-input",{model:{value:t.tempCoupon.title,callback:function(e){t.$set(t.tempCoupon,"title",e)},expression:"tempCoupon.title"}})],1),a("el-form-item",{attrs:{label:"优惠码",prop:"code"}},[a("el-input",{model:{value:t.tempCoupon.code,callback:function(e){t.$set(t.tempCoupon,"code",e)},expression:"tempCoupon.code"}})],1),a("el-form-item",{attrs:{label:"到期日",prop:"due_date"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.due_date,callback:function(e){t.due_date=e},expression:"due_date"}})],1),a("el-form-item",{attrs:{label:"百分比",prop:"percent"}},[a("el-input",{model:{value:t.tempCoupon.percent,callback:function(e){t.$set(t.tempCoupon,"percent",e)},expression:"tempCoupon.percent"}})],1),a("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[a("el-radio-group",{model:{value:t.tempCoupon.is_enabled,callback:function(e){t.$set(t.tempCoupon,"is_enabled",e)},expression:"tempCoupon.is_enabled"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updataCoupon}},[t._v("确定")])],1)],1)],1)},ra=[],sa={name:"AdminCoupons",components:{Pagination:Xt},data:function(){return{coupons:[],pagination:{},tempCoupon:{title:"",is_enabled:0,percent:100,due_date:0,code:""},due_date:new Date,isNew:!1,dialogVisible:!1,dialogTitle:"",formRules:{title:[{required:!0,message:"请输入优惠码名称",trigger:"blur"}],code:[{required:!0,message:"请输入优惠码",trigger:"blur"}],is_enabled:[{required:!0,message:"请选择是否启用",trigger:"blur"}],percent:[{required:!0,message:"请输入百分比",trigger:"blur"}],due_date:[{required:!0,message:"请输入优惠码到期日",trigger:"blur"}]}}},methods:{getCoupons:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("api/ruby/admin/coupons?page=".concat(e)).then((function(e){if(!e.data.success)return t.$message.error("获取优惠码列表失败");t.coupons=e.data.coupons,t.pagination=e.data.pagination}))},openDialog:function(t,e){t?(this.tempCoupon={},this.isNew=!0,this.dialogTitle="添加优惠码"):(this.tempCoupon=e,this.isNew=!1,this.dialogTitle="编辑优惠码"),this.dialogVisible=!0},updataCoupon:function(){var t=this;this.$refs.formRef.validate((function(e){e&&(t.isNew?t.$http.post("api/ruby/admin/coupon",{data:t.tempCoupon}).then((function(e){if(!e.data.success)return t.$message.error("添加优惠码失败");t.getCoupons(),t.$message.success("添加优惠码成功"),t.dialogVisible=!1})):t.$http.put("api/ruby/admin/coupon/".concat(t.tempCoupon.id),{data:t.tempCoupon}).then((function(e){if(!e.data.success)return t.$message.error("编辑优惠码失败");t.getCoupons(),t.$message.success("编辑优惠码成功"),t.dialogVisible=!1})))}))},removeItem:function(t){var e=this;this.$confirm("此操作将永久删除该优惠码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("api/ruby/admin/coupon/".concat(t)).then((function(t){if(!t.data.success)return e.$message.error("删除优惠码失败");e.$message.success("删除优惠码成功!"),e.getCoupons()}))})).catch((function(){e.$message.info("已取消删除")}))},dialogClose:function(){this.$refs.formRef.resetFields()}},created:function(){this.getCoupons()},watch:{due_date:function(){var t=Math.floor(new Date(this.due_date)/1e3);this.tempCoupon.due_date=t}}},na=sa,oa=(0,u.Z)(na,aa,ra,!1,null,"571813d4",null),ia=oa.exports;n["default"].use(Ot.Z);var la=new Ot.Z({routes:[{path:"/",component:zt,children:[{path:"/",component:Bt},{path:"/products",component:ee},{path:"/product",component:ie},{path:"/orders",component:fe},{path:"/cart",component:$e},{path:"/checkout",component:be}]},{path:"/login",component:je,name:"login"},{path:"/admin",component:ze,meta:{isAuth:!0},children:[{path:"/",component:Be,meta:{isAuth:!0}},{path:"products",component:We,meta:{isAuth:!0}},{path:"orders",component:ea,meta:{isAuth:!0}},{path:"coupons",component:ia,meta:{isAuth:!0}}]}]});la.beforeEach((function(t,e,a){t.meta.isAuth?Mt().post("api/user/check").then((function(t){t.data.success?a():a({name:"login"})})):a()}));var ca=la;function ua(t){return new Date(1e3*t).toLocaleDateString()}a(9653),a(6977);function da(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var r=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return r})))}var pa={namespaced:!0,state:{cart:{carts:[]}},mutations:{CART:function(t,e){t.cart=e}},actions:{getCart:function(t){Mt().get("api/ruby/cart").then((function(e){t.commit("CART",e.data.data)}))},addToCart:function(t,e){var a=e.id,r=e.qty,s={product_id:a,qty:r};Mt().post("api/ruby/cart",{data:s}).then((function(e){if("已加入購物車"!==e.data.message)return h().error("加入购物车失败");h().success("商品已加入购物车"),t.dispatch("getCart")}))},removeCartItem:function(t,e){Mt()["delete"]("api/ruby/cart/".concat(e)).then((function(e){if(!e.data.success)return h().error("删除购物车商品失败");h().success("购物车商品已删除"),t.dispatch("getCart")}))}}},fa={namespaced:!0,state:{products:[],pagination:{}},mutations:{PRODUCTS:function(t,e){t.products=e},PAGINATION:function(t,e){t.pagination=e}},actions:{getProducts:function(t,e){Mt().get("api/ruby/products?page=".concat(e)).then((function(e){if(!e.data.success)return h().error("获取商品资料失败");t.commit("PRODUCTS",e.data.products),t.commit("PAGINATION",e.data.pagination)}))}}};n["default"].use(Zt.ZP);var ma=new Zt.ZP.Store({actions:{checkLogin:function(t){Mt().post("api/user/check").then((function(e){e.data.success?t.commit("LOGIN",!0):t.commit("LOGIN",!1)}))}},mutations:{LOGIN:function(t,e){t.login=e}},state:{login:!1},modules:{cartModule:pa,productModule:fa}});Mt().defaults.baseURL="https://vue-course-api.hexschool.io/",Mt().interceptors.request.use((function(t){return s().service(),t})),Mt().interceptors.response.use((function(t){return s().service().close(),t})),n["default"].prototype.$http=Mt(),n["default"].config.productionTip=!1,n["default"].filter("date",ua),n["default"].filter("currency",da),new n["default"]({el:"#app",router:ca,store:ma,render:function(t){return t(p)}})}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,r,s,n){if(!r){var o=1/0;for(u=0;u<t.length;u++){r=t[u][0],s=t[u][1],n=t[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(i=!1,n<o&&(o=n));if(i){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[r,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,o=r[0],i=r[1],l=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var u=l(a)}for(e&&e(r);c<o.length;c++)n=o[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},r=self["webpackChunkshop"]=self["webpackChunkshop"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(5831)}));r=a.O(r)})();
//# sourceMappingURL=app-legacy.aae73d4e.js.map